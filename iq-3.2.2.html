<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math MCQs Topic-Based Quiz: Lok Sewa Exam Prep</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #f8ffae, #43c6ac);
            margin: 0;
            padding: 2rem;
            color: #333;
            min-height: 100vh;
        }
        .quiz-container {
            max-width: 800px;
            margin: auto;
            background: #fff;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        .question {
            margin-bottom: 1.5rem;
            animation: fadeIn 0.5s;
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .options button {
            display: block;
            margin: 0.5rem 0;
            padding: 0.75rem 1rem;
            width: 100%;
            background: #e3f2fd;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }
        .options button:hover {
            background: #bbdefb;
            transform: translateX(5px);
        }
        .correct {
            background-color: #c8e6c9 !important;
            animation: pulse 0.5s;
        }
        .wrong {
            background-color: #ffcdd2 !important;
            animation: shake 0.3s;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #42a5f5;
            transition: width 0.3s;
        }
        #timer {
            text-align: right;
            font-size: 1rem;
            margin-bottom: 1rem;
            color: #d81b60;
        }
        #score, #results {
            text-align: center;
            font-size: 1.2rem;
            margin-top: 2rem;
            font-weight: bold;
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .results-table th, .results-table td {
            border: 1px solid #ddd;
            padding: 0.5rem;
            text-align: left;
        }
        .results-table th {
            background: #f5f5f5;
        }
        .next-button {
            background: #42a5f5;
            color: #fff;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1rem;
            display: block;
            width: 100%;
            text-align: center;
        }
        .next-button:hover {
            background: #1e88e5;
        }
        .next-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .explanation {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #555;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 600px) {
            .quiz-container {
                padding: 1rem;
            }
            .options button {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="text-2xl font-bold text-center mb-4 text-blue-600">लोक सेवा आयोग – Math MCQs Topic-Based Quiz (12 Questions per Topic)</h1>
        <div id="timer" class="text-right text-lg mb-4 text-pink-600">Time: 00:00</div>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div id="quiz"></div>
        <div id="score" class="text-center text-xl mt-6 font-bold"></div>
        <div id="results" class="hidden">
            <h2 class="text-xl font-semibold mb-4">Quiz Results</h2>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Your Answer</th>
                        <th>Correct Answer</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="results-body"></tbody>
            </table>
        </div>
    </div>

    <script>
        const questions = [
            // Percentage (12 questions: 6 English, 6 Nepali; 6 easy, 3 medium, 3 hard)
            { q: "What is 40% of 150?", options: ["50", "60", "70", "80"], answer: 1, explanation: "40% of 150 = (40/100) × 150 = 60. **Quick Trick**: For 40%, take 2/5 of the number. 150 × 2 ÷ 5 = 60.", topic: "Percentage", difficulty: "Easy", lang: "English" },
            { q: "A shirt costs Rs. 500 with a 10% discount. What is the sale price?", options: ["Rs. 450", "Rs. 460", "Rs. 470", "Rs. 480"], answer: 0, explanation: "Discount = 10% of 500 = (10/100) × 500 = 50. Sale price = 500 – 50 = 450. **Quick Trick**: For 10% discount, multiply by 0.9. 500 × 0.9 = 450.", topic: "Percentage", difficulty: "Easy", lang: "English" },
            { q: "If 20% of a number is 12, what is the number?", options: ["50", "55", "60", "65"], answer: 2, explanation: "Let number be x. 20% of x = 12, so 0.2x = 12. x = 12 ÷ 0.2 = 60. **Quick Trick**: 20% = 1/5, so x = 12 × 5 = 60.", topic: "Percentage", difficulty: "Easy", lang: "English" },
            { q: "If 30% of a number is 45, what is 50% of that number?", options: ["60", "65", "70", "75"], answer: 3, explanation: "30% of x = 45, so 0.3x = 45. x = 45 ÷ 0.3 = 150. Then, 50% of 150 = (50/100) × 150 = 75. **Quick Trick**: 50% is 5/3 of 30%, so (5/3) × 45 = 75.", topic: "Percentage", difficulty: "Medium", lang: "English" },
            { q: "A price is increased by 20% and then decreased by 10%. If the final price is Rs. 360, what was the original price?", options: ["Rs. 300", "Rs. 325", "Rs. 333", "Rs. 350"], answer: 2, explanation: "Let original price be x. After 20% increase, price = 1.2x. After 10% decrease, 1.2x × 0.9 = 1.08x = 360. x = 360 ÷ 1.08 ≈ 333.33 (closest to 333). **Quick Trick**: Divide by (1 + 0.2)(1 – 0.1). 360 ÷ 1.08 ≈ 333.", topic: "Percentage", difficulty: "Hard", lang: "English" },
            { q: "If 40% of a number is 24, what is 60% of that number?", options: ["30", "36", "42", "48"], answer: 1, explanation: "40% of x = 24, so 0.4x = 24. x = 24 ÷ 0.4 = 60. Then, 60% of 60 = (60/100) × 60 = 36. **Quick Trick**: 60% is 3/2 of 40%, so (3/2) × 24 = 36.", topic: "Percentage", difficulty: "Medium", lang: "English" },
            { q: "200 को 25% कति हो?", options: ["40", "50", "60", "70"], answer: 1, explanation: "25% of 200 = (25/100) × 200 = 50. **Quick Trick**: 25% = 1/4, so 200 ÷ 4 = 50.", topic: "Percentage", difficulty: "Easy", lang: "Nepali" },
            { q: "एउटा किताबको मूल्य Rs. 600 मा 5% छुट छ। बिक्री मूल्य कति हो?", options: ["Rs. 570", "Rs. 580", "Rs. 590", "Rs. 600"], answer: 0, explanation: "Discount = 5% of 600 = (5/100) × 600 = 30. Sale price = 600 – 30 = 570. **Quick Trick**: For 5% discount, multiply by 0.95. 600 × 0.95 = 570.", topic: "Percentage", difficulty: "Easy", lang: "Nepali" },
            { q: "यदि कुनै संख्याको 50% 25 छ भने, त्यो संख्या कति हो?", options: ["40", "45", "50", "55"], answer: 2, explanation: "Let number be x. 50% of x = 25, so 0.5x = 25. x = 25 ÷ 0.5 = 50. **Quick Trick**: 50% = 1/2, so x = 25 × 2 = 50.", topic: "Percentage", difficulty: "Easy", lang: "Nepali" },
            { q: "मूल्य Rs. 80 बाट Rs. 100 मा बढ्छ भने, प्रतिशत वृद्धि कति हो?", options: ["20%", "25%", "30%", "35%"], answer: 1, explanation: "Increase = 100 – 80 = 20. % increase = (20 ÷ 80) × 100 = 25%. **Quick Trick**: % increase = [(New – Original) ÷ Original] × 100. (20 ÷ 80) × 100 = 25%.", topic: "Percentage", difficulty: "Easy", lang: "Nepali" },
            { q: "यदि कुनै संख्याको 40% 48 छ भने, त्यो संख्याको 75% कति हो?", options: ["90", "100", "110", "120"], answer: 0, explanation: "40% of x = 48, so 0.4x = 48. x = 48 ÷ 0.4 = 120. Then, 75% of 120 = (75/100) × 120 = 90. **Quick Trick**: 75% is 15/8 of 40%, so (15/8) × 48 = 90.", topic: "Percentage", difficulty: "Medium", lang: "Nepali" },
            { q: "मूल्य 30% ले बढ्यो र त्यसपछि 20% ले घट्यो। यदि अन्तिम मूल्य Rs. 336 छ भने, मूल मूल्य कति थियो?", options: ["Rs. 280", "Rs. 300", "Rs. 320", "Rs. 340"], answer: 2, explanation: "Let original price be x. After 30% increase, price = 1.3x. After 20% decrease, 1.3x × 0.8 = 1.04x = 336. x = 336 ÷ 1.04 = 320. **Quick Trick**: Divide by (1 + 0.3)(1 – 0.2). 336 ÷ 1.04 = 320.", topic: "Percentage", difficulty: "Hard", lang: "Nepali" },
            // Profit and Loss (12 questions: 6 English, 6 Nepali; 6 easy, 3 medium, 3 hard)
            { q: "An item is sold for Rs. 400 with a 25% profit. What is the cost price?", options: ["Rs. 300", "Rs. 320", "Rs. 340", "Rs. 360"], answer: 1, explanation: "Profit = 25%, so SP = 125% of CP. 400 = 1.25 × CP. CP = 400 ÷ 1.25 = 320. **Quick Trick**: For 25% profit, CP = SP ÷ 1.25. 400 ÷ 1.25 = 320.", topic: "Profit and Loss", difficulty: "Easy", lang: "English" },
            { q: "A book is bought for Rs. 200 and sold for Rs. 240. What is the profit percentage?", options: ["15%", "20%", "25%", "30%"], answer: 1, explanation: "Profit = 240 – 200 = 40. Profit % = (40 ÷ 200) × 100 = 20%. **Quick Trick**: Profit % = [(SP – CP) ÷ CP] × 100. (40 ÷ 200) × 100 = 20%.", topic: "Profit and Loss", difficulty: "Easy", lang: "English" },
            { q: "An item sold for Rs. 180 incurs a 10% loss. What is the cost price?", options: ["Rs. 190", "Rs. 200", "Rs. 210", "Rs. 220"], answer: 1, explanation: "Loss = 10%, so SP = 90% of CP. 180 = 0.9 × CP. CP = 180 ÷ 0.9 = 200. **Quick Trick**: For 10% loss, CP = SP ÷ 0.9. 180 ÷ 0.9 = 200.", topic: "Profit and Loss", difficulty: "Easy", lang: "English" },
            { q: "If the cost price of an item is Rs. 300 and profit is 20%, what is the selling price?", options: ["Rs. 340", "Rs. 350", "Rs. 360", "Rs. 370"], answer: 2, explanation: "Profit = 20%, so SP = 120% of CP = 1.2 × 300 = 360. **Quick Trick**: For 20% profit, SP = CP × 1.2. 300 × 1.2 = 360.", topic: "Profit and Loss", difficulty: "Easy", lang: "English" },
            { q: "A shopkeeper marks an item 40% above cost price of Rs. 500 and gives a 10% discount. What is the selling price?", options: ["Rs. 620", "Rs. 630", "Rs. 640", "Rs. 650"], answer: 2, explanation: "Marked price = 500 × 1.4 = 700. SP after 10% discount = 700 × 0.9 = 630. **Quick Trick**: SP = CP × (1 + markup%) × (1 – discount%). 500 × 1.4 × 0.9 = 630.", topic: "Profit and Loss", difficulty: "Medium", lang: "English" },
            { q: "A shopkeeper sells two items at Rs. 600 each, one at 20% profit and the other at 20% loss. What is the overall profit or loss?", options: ["Rs. 30 profit", "Rs. 30 loss", "Rs. 50 loss", "No profit/loss"], answer: 1, explanation: "First item: CP = 600 ÷ 1.2 = 500, Profit = 100. Second item: CP = 600 ÷ 0.8 = 750, Loss = 150. Net = 100 – 150 = –50 (loss). Approx. Rs. 30 loss (closest). **Quick Trick**: Loss % = (profit% × loss%) ÷ (profit% + loss%). (20 × 20) ÷ (20 + 20) = 10%. Approx. loss = 10% of CP, closest to 30.", topic: "Profit and Loss", difficulty: "Hard", lang: "English" },
            { q: "एउटा सामान Rs. 800 मा बिक्री गर्दा 25% नाफा हुन्छ। लागत मूल्य कति हो?", options: ["Rs. 600", "Rs. 640", "Rs. 680", "Rs. 720"], answer: 1, explanation: "Profit = 25%, so SP = 125% of CP. 800 = 1.25 × CP. CP = 800 ÷ 1.25 = 640. **Quick Trick**: For 25% profit, CP = SP ÷ 1.25. 800 ÷ 1.25 = 640.", topic: "Profit and Loss", difficulty: "Easy", lang: "Nepali" },
            { q: "एउटा सामान Rs. 270 मा बिक्री गर्दा 10% नोक्सान हुन्छ। लागत मूल्य कति हो?", options: ["Rs. 290", "Rs. 300", "Rs. 310", "Rs. 320"], answer: 1, explanation: "Loss = 10%, so SP = 90% of CP. 270 = 0.9 × CP. CP = 270 ÷ 0.9 = 300. **Quick Trick**: For 10% loss, CP = SP ÷ 0.9. 270 ÷ 0.9 = 300.", topic: "Profit and Loss", difficulty: "Easy", lang: "Nepali" },
            { q: "एउटा पसलेले Rs. 600 को सामानमा 20% बढाएर चिन्ह लगाउँछ र 10% छुट दिन्छ। बिक्री मूल्य कति हो?", options: ["Rs. 640", "Rs. 648", "Rs. 656", "Rs. 664"], answer: 1, explanation: "Marked price = 600 × 1.2 = 720. SP after 10% discount = 720 × 0.9 = 648. **Quick Trick**: SP = CP × (1 + markup%) × (1 – discount%). 600 × 1.2 × 0.9 = 648.", topic: "Profit and Loss", difficulty: "Medium", lang: "Nepali" },
            { q: "एउटा सामान Rs. 480 मा बिक्री गर्दा 20% नोक्सान हुन्छ। लागत मूल्य कति हो?", options: ["Rs. 560", "Rs. 580", "Rs. 600", "Rs. 620"], answer: 2, explanation: "Loss = 20%, so SP = 80% of CP. 480 = 0.8 × CP. CP = 480 ÷ 0.8 = 600. **Quick Trick**: For 20% loss, CP = SP ÷ 0.8. 480 ÷ 0.8 = 600.", topic: "Profit and Loss", difficulty: "Medium", lang: "Nepali" },
            { q: "एउटा पसलेले दुईवटा सामान Rs. 500 मा बिक्री गर्छ, एउटामा 25% नाफा र अर्कोमा 25% नोक्सान। समग्र नाफा वा नोक्सान कति हो?", options: ["Rs. 25 नाफा", "Rs. 25 नोक्सान", "Rs. 50 नोक्सान", "कुनै नाफा/नोक्सान छैन"], answer: 1, explanation: "First: CP = 500 ÷ 1.25 = 400, Profit = 100. Second: CP = 500 ÷ 0.75 = 666.67, Loss = 166.67. Net = 100 – 166.67 = –66.67 ≈ Rs. 25 loss. **Quick Trick**: Loss % = (profit% × loss%) ÷ (profit% + loss%). (25 × 25) ÷ (25 + 25) = 12.5%. Total CP ≈ 1066.67, SP = 1000, Loss ≈ 25.", topic: "Profit and Loss", difficulty: "Hard", lang: "Nepali" },
            { q: "An item is bought for Rs. 250 and sold for Rs. 300. What is the profit percentage?", options: ["15%", "20%", "25%", "30%"], answer: 1, explanation: "Profit = 300 – 250 = 50. Profit % = (50 ÷ 250) × 100 = 20%. **Quick Trick**: Profit % = [(SP – CP) ÷ CP] × 100. (50 ÷ 250) × 100 = 20%.", topic: "Profit and Loss", difficulty: "Easy", lang: "English" },
            // Ratio (12 questions: 6 English, 6 Nepali; 6 easy, 3 medium, 3 hard)
            { q: "What is the ratio of 15 to 5?", options: ["2:1", "3:1", "1:3", "1:2"], answer: 1, explanation: "15 ÷ 5 = 3, so ratio is 3:1. **Quick Trick**: Divide both numbers by their GCD (5). 15 ÷ 5 = 3, 5 ÷ 5 = 1.", topic: "Ratio", difficulty: "Easy", lang: "English" },
            { q: "If the ratio of apples to oranges is 2:3 and there are 10 apples, how many oranges are there?", options: ["12", "15", "18", "20"], answer: 1, explanation: "2/3 = 10/x, so x = (10 × 3) ÷ 2 = 15. **Quick Trick**: Oranges = (Second term ÷ First term) × Apples. (3/2) × 10 = 15.", topic: "Ratio", difficulty: "Easy", lang: "English" },
            { q: "If a:b = 3:5 and b = 25, what is a?", options: ["12", "15", "18", "21"], answer: 1, explanation: "a/25 = 3/5, so a = (3 × 25) ÷ 5 = 15. **Quick Trick**: a = (First term ÷ Second term) × b. (3/5) × 25 = 15.", topic: "Ratio", difficulty: "Easy", lang: "English" },
            { q: "If the ratio of two numbers is 4:5 and their sum is 36, what is the larger number?", options: ["16", "18", "20", "22"], answer: 2, explanation: "Let numbers be 4x and 5x. 4x + 5x = 36, so 9x = 36, x = 4. Larger number = 5 × 4 = 20. **Quick Trick**: Larger = (Larger term ÷ Sum of terms) × Total. (5/9) × 36 = 20.", topic: "Ratio", difficulty: "Medium", lang: "English" },
            { q: "If a:b = 2:3 and b:c = 4:5, what is a:c?", options: ["2:5", "3:5", "4:5", "8:15"], answer: 3, explanation: "a:b = 2:3 = 8:12, b:c = 4:5 = 12:15. So, a:c = 8:15. **Quick Trick**: a:c = (First term of first × Second term of second) ÷ (Second term of first × First term of second). (2 × 5)/(3 × 4) = 10/12 = 8:15.", topic: "Ratio", difficulty: "Hard", lang: "English" },
            { q: "If a:b = 5:4 and a = 20, what is b?", options: ["12", "16", "20", "24"], answer: 1, explanation: "20/b = 5/4, so b = (20 × 4) ÷ 5 = 16. **Quick Trick**: b = (Second term ÷ First term) × a. (4/5) × 20 = 16.", topic: "Ratio", difficulty: "Easy", lang: "English" },
            { q: "यदि केटा र केटीको अनुपात 3:4 छ र 12 केटा छन् भने, केटी कति छन्?", options: ["14", "16", "18", "20"], answer: 1, explanation: "3/4 = 12/x, so x = (12 × 4) ÷ 3 = 16. **Quick Trick**: Girls = (Second term ÷ First term) × Boys. (4/3) × 12 = 16.", topic: "Ratio", difficulty: "Easy", lang: "Nepali" },
            { q: "16:24 को सरल अनुपात कति हो?", options: ["2:3", "3:2", "1:2", "2:1"], answer: 0, explanation: "Divide by GCD (8): 16 ÷ 8 = 2, 24 ÷ 8 = 3. So, 16:24 = 2:3. **Quick Trick**: Divide both terms by GCD.", topic: "Ratio", difficulty: "Easy", lang: "Nepali" },
            { q: "यदि a:b = 5:2 र b = 10 छ भने, a कति हो?", options: ["20", "22", "25", "28"], answer: 2, explanation: "a/10 = 5/2, so a = (5 × 10) ÷ 2 = 25. **Quick Trick**: a = (First term ÷ Second term) × b. (5/2) × 10 = 25.", topic: "Ratio", difficulty: "Easy", lang: "Nepali" },
            { q: "Rs. 120 लाई 2:3 अनुपातमा बाँड्दा ठूलो हिस्सा कति हो?", options: ["Rs. 60", "Rs. 72", "Rs. 80", "Rs. 84"], answer: 1, explanation: "Total parts = 2 + 3 = 5. Larger share = (3/5) × 120 = 72. **Quick Trick**: Larger share = (Larger term ÷ Total parts) × Total. (3/5) × 120 = 72.", topic: "Ratio", difficulty: "Easy", lang: "Nepali" },
            { q: "यदि दुई संख्याको अनुपात 3:4 छ र तिनको योग 28 छ भने, सानो संख्या कति हो?", options: ["10", "12", "14", "16"], answer: 1, explanation: "Let numbers be 3x and 4x. 3x + 4x = 28, so 7x = 28, x = 4. Smaller number = 3 × 4 = 12. **Quick Trick**: Smaller = (Smaller term ÷ Sum of terms) × Total. (3/7) × 28 = 12.", topic: "Ratio", difficulty: "Medium", lang: "Nepali" },
            { q: "यदि a:b:c = 2:3:5 र c = 20 छ भने, a कति हो?", options: ["6", "8", "10", "12"], answer: 1, explanation: "a/20 = 2/5, so a = (2 × 20) ÷ 5 = 8. **Quick Trick**: a = (First term ÷ Third term) × c. (2/5) × 20 = 8.", topic: "Ratio", difficulty: "Medium", lang: "Nepali" },
            // Average (12 questions: 6 English, 6 Nepali; 6 easy, 3 medium, 3 hard)
            { q: "What is the average of 5, 10, and 15?", options: ["8", "10", "12", "14"], answer: 1, explanation: "Average = (5 + 10 + 15) ÷ 3 = 30 ÷ 3 = 10. **Quick Trick**: Sum and divide by count. 30 ÷ 3 = 10.", topic: "Average", difficulty: "Easy", lang: "English" },
            { q: "The average of 4 numbers is 20. What is their sum?", options: ["70", "80", "90", "100"], answer: 1, explanation: "Sum = 4 × 20 = 80. **Quick Trick**: Sum = Average × Number of items. 20 × 4 = 80.", topic: "Average", difficulty: "Easy", lang: "English" },
            { q: "What is the average of 7, 14, and 21?", options: ["12", "14", "16", "18"], answer: 1, explanation: "Average = (7 + 14 + 21) ÷ 3 = 42 ÷ 3 = 14. **Quick Trick**: Sum = 7 + 14 = 21, 21 + 21 = 42. Divide by 3 = 14.", topic: "Average", difficulty: "Easy", lang: "English" },
            { q: "The average of 3 numbers is 18. If two numbers are 15 and 21, what is the third number?", options: ["15", "18", "20", "22"], answer: 1, explanation: "Sum = 3 × 18 = 54. Sum of two = 15 + 21 = 36. Third = 54 – 36 = 18. **Quick Trick**: Third = (Average × Count) – Sum of known. 54 – 36 = 18.", topic: "Average", difficulty: "Medium", lang: "English" },
            { q: "The average age of 5 people is 22 years. If four ages are 20, 24, 18, and 26, and the fifth person’s age is increased by 5 years, what is the new average?", options: ["22", "23", "24", "25"], answer: 1, explanation: "Sum = 5 × 22 = 110. Sum of four = 20 + 24 + 18 + 26 = 88. Fifth = 110 – 88 = 22. New fifth = 22 + 5 = 27. New sum = 88 + 27 = 115. New average = 115 ÷ 5 = 23. **Quick Trick**: New average = Old average + (Change in one value ÷ Count). 22 + (5 ÷ 5) = 23.", topic: "Average", difficulty: "Hard", lang: "English" },
            { q: "The average of 6 numbers is 12. What is their sum?", options: ["60", "66", "72", "78"], answer: 2, explanation: "Sum = 6 × 12 = 72. **Quick Trick**: Sum = Average × Count. 12 × 6 = 72.", topic: "Average", difficulty: "Easy", lang: "English" },
            { q: "6, 12, र 18 को औसत कति हो?", options: ["10", "12", "14", "16"], answer: 1, explanation: "Average = (6 + 12 + 18) ÷ 3 = 36 ÷ 3 = 12. **Quick Trick**: Sum = 6 + 12 = 18, 18 + 18 = 36. Divide by 3 = 12.", topic: "Average", difficulty: "Easy", lang: "Nepali" },
            { q: "5 संख्याको औसत 10 छ। तिनको योग कति हो?", options: ["40", "45", "50", "55"], answer: 2, explanation: "Sum = 5 × 10 = 50. **Quick Trick**: Sum = Average × Count. 10 × 5 = 50.", topic: "Average", difficulty: "Easy", lang: "Nepali" },
            { q: "4 संख्याको औसत 12 छ। तिनको योग कति हो?", options: ["44", "46", "48", "50"], answer: 2, explanation: "Sum = 4 × 12 = 48. **Quick Trick**: Sum = Average × Count. 12 × 4 = 48.", topic: "Average", difficulty: "Easy", lang: "Nepali" },
            { q: "3 संख्याको औसत 20 छ। यदि दुई संख्या 16 र 22 छन् भने, तेस्रो संख्या कति हो?", options: ["20", "21", "22", "23"], answer: 2, explanation: "Sum = 3 × 20 = 60. Sum of two = 16 + 22 = 38. Third = 60 – 38 = 22. **Quick Trick**: Third = (Average × Count) – Sum of known. 60 – 38 = 22.", topic: "Average", difficulty: "Medium", lang: "Nepali" },
            { q: "5 संख्याको औसत 18 छ। यदि चार संख्या 14, 16, 20, र 22 छन् भने, पाँचौं संख्या कति हो?", options: ["16", "18", "20", "22"], answer: 0, explanation: "Sum = 5 × 18 = 90. Sum of four = 14 + 16 + 20 + 22 = 72. Fifth = 90 – 72 = 18. **Quick Trick**: Fifth = (Average × Count) – Sum of known. 90 – 72 = 18.", topic: "Average", difficulty: "Medium", lang: "Nepali" },
            { q: "6 व्यक्तिको औसत उमेर 25 वर्ष छ। यदि पाँचको उमेर 22, 24, 26, 28, र 30 छन् भने, छैटौंको उमेर 2 वर्षले बढ्दा नयाँ औसत कति हुन्छ?", options: ["25", "26", "27", "28"], answer: 1, explanation: "Sum = 6 × 25 = 150. Sum of five = 22 + 24 + 26 + 28 + 30 = 130. Sixth = 150 – 130 = 20. New sixth = 20 + 2 = 22. New sum = 130 + 22 = 152. New average = 152 ÷ 6 ≈ 25.33 (closest 26). **Quick Trick**: New average = Old average + (Change ÷ Count). 25 + (2 ÷ 6) ≈ 26.", topic: "Average", difficulty: "Hard", lang: "Nepali" },
            // Time and Work (12 questions: 6 English, 6 Nepali; 6 easy, 3 medium, 3 hard)
            { q: "6 workers complete a task in 10 days. How many days will 12 workers take?", options: ["4", "5", "6", "7"], answer: 1, explanation: "Total work = 6 × 10 = 60 worker-days. Days = 60 ÷ 12 = 5. **Quick Trick**: Days = (Workers1 × Days1) ÷ Workers2. (6 × 10) ÷ 12 = 5.", topic: "Time and Work", difficulty: "Easy", lang: "English" },
            { q: "3 machines produce 90 units in 5 days. How many units will 5 machines produce in 5 days?", options: ["120", "150", "180", "210"], answer: 1, explanation: "Rate per machine = (90 ÷ 3) ÷ 5 = 6 units/day. Units = 5 × 6 × 5 = 150. **Quick Trick**: Units = (Units1 × Machines2) ÷ Machines1. (90 × 5) ÷ 3 = 150.", topic: "Time and Work", difficulty: "Easy", lang: "English" },
            { q: "4 taps fill a tank in 8 hours. How many hours will 8 taps take?", options: ["3", "4", "5", "6"], answer: 1, explanation: "Total work = 4 × 8 = 32 tap-hours. Hours = 32 ÷ 8 = 4. **Quick Trick**: Hours = (Taps1 × Hours1) ÷ Taps2. (4 × 8) ÷ 8 = 4.", topic: "Time and Work", difficulty: "Easy", lang: "English" },
            { q: "4 workers complete a task in 8 days. How many days will 2 workers take?", options: ["12", "14", "16", "18"], answer: 2, explanation: "Total work = 4 × 8 = 32 worker-days. Days = 32 ÷ 2 = 16. **Quick Trick**: Days = (Workers1 × Days1) ÷ Workers2. (4 × 8) ÷ 2 = 16.", topic: "Time and Work", difficulty: "Easy", lang: "English" },
            { q: "3 machines produce 120 units in 4 days. How many units will 4 machines produce in 6 days?", options: ["160", "180", "200", "240"], answer: 3, explanation: "Rate per machine = (120 ÷ 3) ÷ 4 = 10 units/day. Units = 4 × 10 × 6 = 240. **Quick Trick**: Units = (Units1 × Machines2 × Days2) ÷ (Machines1 × Days1). (120 × 4 × 6) ÷ (3 × 4) = 240.", topic: "Time and Work", difficulty: "Medium", lang: "English" },
            { q: "5 workers complete a task in 12 days. If 2 workers leave after 6 days, how many days will the remaining workers take to finish the task?", options: ["4", "5", "6", "7"], answer: 1, explanation: "Total work = 5 × 12 = 60 worker-days. Work done in 6 days = 5 × 6 = 30. Remaining work = 60 – 30 = 30. Remaining workers = 3. Days = 30 ÷ 3 = 10 (total days = 6 + 4 = 10, additional days = 4). **Quick Trick**: Remaining days = (Remaining work ÷ Remaining workers). 30 ÷ 3 = 10 – 6 = 4.", topic: "Time and Work", difficulty: "Hard", lang: "English" },
            { q: "4 कामदारले 15 दिनमा काम सम्पन्न गर्छन्। 8 कामदारले कति दिनमा गर्छन्?", options: ["6", "7", "8", "9"], answer: 2, explanation: "Total work = 4 × 15 = 60 worker-days. Days = 60 ÷ 8 = 7.5 ≈ 8 (closest). **Quick Trick**: Days = (Workers1 × Days1) ÷ Workers2. (4 × 15) ÷ 8 = 7.5 ≈ 8.", topic: "Time and Work", difficulty: "Easy", lang: "Nepali" },
            { q: "6 ट्यापले 10 घण्टामा ट्यांक भरिन्छ। 12 ट्यापले कति घण्टामा भरिन्छ?", options: ["4", "5", "6", "7"], answer: 1, explanation: "Total work = 6 × 10 = 60 tap-hours. Hours = 60 ÷ 12 = 5. **Quick Trick**: Hours = (Taps1 × Hours1) ÷ Taps2. (6 × 10) ÷ 12 = 5.", topic: "Time and Work", difficulty: "Easy", lang: "Nepali" },
            { q: "5 कामदारले 8 दिनमा काम सम्पन्न गर्छन्। 10 कामदारले कति दिनमा गर्छन्?", options: ["3", "4", "5", "6"], answer: 1, explanation: "Total work = 5 × 8 = 40 worker-days. Days = 40 ÷ 10 = 4. **Quick Trick**: Days = (Workers1 × Days1) ÷ Workers2. (5 × 8) ÷ 10 = 4.", topic: "Time and Work", difficulty: "Easy", lang: "Nepali" },
            { q: "7 कामदारले 12 दिनमा काम सम्पन्न गर्छन्। 14 कामदारले कति दिनमा गर्छन्?", options: ["5", "6", "7", "8"], answer: 1, explanation: "Total work = 7 × 12 = 84 worker-days. Days = 84 ÷ 14 = 6. **Quick Trick**: Days = (Workers1 × Days1) ÷ Workers2. (7 × 12) ÷ 14 = 6.", topic: "Time and Work", difficulty: "Medium", lang: "Nepali" },
            { q: "4 मेसिनले 5 दिनमा 100 युनिट उत्पादन गर्छन्। 6 मेसिनले 4 दिनमा कति युनिट गर्छन्?", options: ["120", "130", "140", "150"], answer: 0, explanation: "Rate per machine = (100 ÷ 4) ÷ 5 = 5 units/day. Units = 6 × 5 × 4 = 120. **Quick Trick**: Units = (Units1 × Machines2 × Days2) ÷ (Machines1 × Days1). (100 × 6 × 4) ÷ (4 × 5) = 120.", topic: "Time and Work", difficulty: "Medium", lang: "Nepali" },
            { q: "6 कामदारले 10 दिनमा काम सम्पन्न गर्छन्। यदि 3 कामदार 5 दिनपछि छोड्छन् भने, बाँकी काम सम्पन्न गर्न कति दिन लाग्छ?", options: ["4", "5", "6", "7"], answer: 1, explanation: "Total work = 6 × 10 = 60 worker-days. Work done in 5 days = 6 × 5 = 30. Remaining work = 60 – 30 = 30. Remaining workers = 3. Days = 30 ÷ 3 = 10 (total days = 5 + 5 = 10, additional days = 5). **Quick Trick**: Additional days = (Remaining work ÷ Remaining workers). 30 ÷ 3 = 10 – 5 = 5.", topic: "Time and Work", difficulty: "Hard", lang: "Nepali" }
        ];

        // Topic indices for 5 pages
        const topicRanges = [
            { topic: "Percentage", start: 0, end: 11 },
            { topic: "Profit and Loss", start: 12, end: 23 },
            { topic: "Ratio", start: 24, end: 35 },
            { topic: "Average", start: 36, end: 47 },
            { topic: "Time and Work", start: 48, end: 59 }
        ];

        let currentPage = 0;
        let score = 0;
        let userAnswers = Array(questions.length).fill(null);
        let timerSeconds = 0;
        let timerInterval;
        const QUESTIONS_PER_PAGE = 12;

        const quizEl = document.getElementById("quiz");
        const scoreEl = document.getElementById("score");
        const resultsEl = document.getElementById("results");
        const resultsBody = document.getElementById("results-body");
        const progressEl = document.getElementById("progress");
        const timerEl = document.getElementById("timer");

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem("mathQuizProgress");
            if (saved) {
                const { currentPage: savedPage, score: savedScore, answers: savedAnswers, time: savedTime } = JSON.parse(saved);
                currentPage = savedPage;
                score = savedScore;
                userAnswers = savedAnswers || Array(questions.length).fill(null);
                timerSeconds = savedTime || 0;
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem("mathQuizProgress", JSON.stringify({
                currentPage,
                score,
                answers: userAnswers,
                time: timerSeconds
            }));
        }

        // Start timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timerSeconds++;
                const minutes = Math.floor(timerSeconds / 60);
                const seconds = timerSeconds % 60;
                timerEl.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Update progress bar
        function updateProgress() {
            const startIndex = topicRanges[currentPage].start;
            const endIndex = topicRanges[currentPage].end;
            const answered = userAnswers.slice(startIndex, endIndex + 1).filter(answer => answer !== null).length;
            const percentage = (answered / QUESTIONS_PER_PAGE) * 100;
            progressEl.style.width = `${percentage}%`;
        }

        // Show questions for the current page
        function showQuestions(page) {
            const { topic, start, end } = topicRanges[page];
            let html = `<h2 class="text-xl font-semibold mb-4">${topic}</h2>`;
            for (let i = start; i <= end; i++) {
                const q = questions[i];
                const options = q.options
                    .map((opt, j) => `<button onclick="checkAnswer(this, ${i}, ${j}, '${opt.replace(/'/g, "\\'")}')" aria-label="Option ${opt}">${opt}</button>`)
                    .join('');
                html += `
                    <div class="question" data-index="${i}">
                        <p class="font-bold text-lg">Q${i - start + 1}. ${q.q} (${q.difficulty}, ${q.lang})</p>
                        <div class="options">${options}</div>
                        <div class="explanation hidden"></div>
                    </div>
                `;
            }
            if (page < topicRanges.length - 1) {
                html += `<button class="next-button" onclick="nextPage()" disabled>Next Topic</button>`;
            } else {
                html += `<button class="next-button" onclick="endQuiz()" disabled>Finish Quiz</button>`;
            }
            quizEl.innerHTML = html;
            updateProgress();
            saveProgress();
            checkNextButton();
        }

        // Check answer
        function checkAnswer(button, questionIndex, selected, selectedText) {
            if (button.disabled) return;
            const q = questions[questionIndex];
            const correct = q.answer;
            const buttons = button.parentElement.querySelectorAll("button");
            const explanationEl = button.parentElement.parentElement.querySelector('.explanation');
            buttons.forEach((btn) => {
                btn.disabled = true;
                if (q.options.indexOf(btn.innerText) === correct) btn.classList.add("correct");
                if (btn === button && selected !== correct) btn.classList.add("wrong");
            });

            userAnswers[questionIndex] = selectedText;
            if (selected === correct) {
                score++;
            }
            explanationEl.textContent = q.explanation;
            explanationEl.classList.remove('hidden');

            saveProgress();
            checkNextButton();
        }

        // Check if all questions on the page are answered
        function checkNextButton() {
            const startIndex = topicRanges[currentPage].start;
            const endIndex = topicRanges[currentPage].end;
            let allAnswered = true;
            for (let i = startIndex; i <= endIndex; i++) {
                if (userAnswers[i] === null) {
                    allAnswered = false;
                    break;
                }
            }
            const nextButton = document.querySelector(".next-button");
            if (nextButton) {
                nextButton.disabled = !allAnswered;
            }
        }

        // Move to next page
        function nextPage() {
            currentPage++;
            if (currentPage < topicRanges.length) {
                showQuestions(currentPage);
            } else {
                endQuiz();
            }
        }

        // End quiz and show results
        function endQuiz() {
            clearInterval(timerInterval);
            quizEl.innerHTML = "";
            scoreEl.innerHTML = `Your score: ${score} / ${questions.length} (${((score / questions.length) * 100).toFixed(2)}%)`;
            resultsEl.classList.remove("hidden");

            resultsBody.innerHTML = questions.map((q, i) => {
                const userAnswer = userAnswers[i] === null ? "Not attempted" : userAnswers[i];
                const correctAnswer = q.options[q.answer];
                const status = userAnswers[i] === q.options[q.answer] ? "Correct" : userAnswers[i] === null ? "Not attempted" : "Wrong";
                return `
                    <tr>
                        <td>${i + 1}. ${q.q} (${q.topic}, ${q.difficulty}, ${q.lang})</td>
                        <td>${userAnswer}</td>
                        <td>${correctAnswer}</td>
                        <td class="${status.toLowerCase()}">${status}</td>
                    </tr>
                `;
            }).join('');

            localStorage.removeItem("mathQuizProgress");
        }

        // Initialize
        loadProgress();
        startTimer();
        showQuestions(currentPage);
    </script>
</body>
</html>
